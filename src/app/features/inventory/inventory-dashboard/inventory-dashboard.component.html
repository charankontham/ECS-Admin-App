<!-- Recently Added Products -->
<section id="recent-products" class="card">
    <h2>Recently Added Products</h2>
    <table>
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Category</th>
                <th>Date Added</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let product of recentProducts">
                <td>
                    <a style="color:black;" [routerLink]="['/inventory/products', product.productId]"
                        routerLinkActive="active">
                        {{product.productName }}
                    </a>
                </td>
                <td>{{ product.productSubCategory.productCategory.categoryName }}</td>
                <td>{{ product.dateAdded | date:'medium' }}</td>
            </tr>
        </tbody>
    </table>
</section>

<!-- Out of Stock Products -->
<section id="out-of-stock" class="dashboard-section">
    <mat-card class="table-card">
        <mat-card-header>
            <mat-card-title>
                <h2>Out of Stock Products</h2>
            </mat-card-title>
            <mat-card-subtitle>Products that need restocking</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <div class="table-container">
                <table mat-table [dataSource]="outOfStockDataSource" class="dashboard-table">
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef>Product Name</th>
                        <td mat-cell *matCellDef="let product">{{ product.productName }}</td>
                    </ng-container>

                    <ng-container matColumnDef="category">
                        <th mat-header-cell *matHeaderCellDef>Category</th>
                        <td mat-cell *matCellDef="let product">{{
                            product.productSubCategory.productCategory.categoryName }}</td>
                    </ng-container>

                    <ng-container matColumnDef="quantity">
                        <th mat-header-cell *matHeaderCellDef>Quantity</th>
                        <td mat-cell *matCellDef="let product">
                            <span class="out-of-stock-badge">{{ product.productQuantity }}</span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef>Price</th>
                        <td mat-cell *matCellDef="let product">{{ product.productPrice | currency }}</td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="outOfStockColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: outOfStockColumns;"></tr>

                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell no-data" [attr.colspan]="outOfStockColumns.length">
                            No out of stock products found
                        </td>
                    </tr>
                </table>

                <mat-paginator [length]="totalOutOfStockProducts" [pageSize]="outOfStockPageSize"
                    [pageSizeOptions]="[5, 10, 25]" (page)="onOutOfStockPageChange($event)" showFirstLastButtons>
                </mat-paginator>
            </div>
        </mat-card-content>
    </mat-card>
</section>

<!-- High Selling Products -->
<section id="high-selling" class="dashboard-section">
    <mat-card class="table-card">
        <mat-card-header>
            <mat-card-title>High Selling Products</mat-card-title>
            <mat-card-subtitle>Top performing products by sales volume</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <div class="table-container">
                <table mat-table [dataSource]="highSellingDataSource" class="dashboard-table">
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef>Product Name</th>
                        <td mat-cell *matCellDef="let product">{{ product.name }}</td>
                    </ng-container>

                    <ng-container matColumnDef="unitsSold">
                        <th mat-header-cell *matHeaderCellDef>Units Sold</th>
                        <td mat-cell *matCellDef="let product">
                            <span class="high-selling-badge">{{ product.unitsSold }}</span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="category">
                        <th mat-header-cell *matHeaderCellDef>Category</th>
                        <td mat-cell *matCellDef="let product">{{ product.category || 'N/A' }}</td>
                    </ng-container>

                    <ng-container matColumnDef="revenue">
                        <th mat-header-cell *matHeaderCellDef>Revenue</th>
                        <td mat-cell *matCellDef="let product">{{ product.revenue | currency }}</td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="highSellingColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: highSellingColumns;"></tr>

                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell no-data" [attr.colspan]="highSellingColumns.length">
                            No high selling products data available
                        </td>
                    </tr>
                </table>

                <mat-paginator [length]="totalHighSellingProducts" [pageSize]="highSellingPageSize"
                    [pageSizeOptions]="[5, 10, 25]" (page)="onHighSellingPageChange($event)" showFirstLastButtons>
                </mat-paginator>
            </div>
        </mat-card-content>
    </mat-card>
</section>

<!-- Analytics Section -->
<section id="analytics" class="card">
    <h2>Sales Trends</h2>
    <canvas id="salesTrendsChart" width="400" height="200"></canvas>
</section>